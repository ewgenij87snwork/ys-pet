<app-page-title title="Posts List"></app-page-title>

<div *ngIf="posts" class="container post-item">
  <mat-card *ngFor="let post of posts" class="mb-4">
    <div class="header mb-3 d-flex justify-content-between">
      <div class="d-flex">
        <mat-icon class="header__avatar">{{ post.avatar || 'account_box' }}</mat-icon>
        <div>
          <p class="header__author">
            {{ post.author }}
          </p>
          <p class="header__date">
            {{ post.date | date: 'short'}}
          </p>
        </div>
      </div>
      <app-likes [likes]="post.likes" [editable]="true" (likeCallback)="updateLikes(post.id)"></app-likes>
    </div>
    <mat-card-title-group class="title-group d-flex justify-content-center text-center">
      <mat-card-title class="title-group__title mb-3">{{ post.title }}</mat-card-title>
      <mat-card-subtitle class="title-group__subtitle">{{ post.subtitle }}</mat-card-subtitle>
    </mat-card-title-group>

    <mat-card-content class="content">
      <p class="content__text">{{ post.text | slice:0:500 }}</p>
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <span class="badge bg-secondary ms-1 tag" *ngFor="let tag of post.tags"
                (click)="onTagClick(tag)">{{ tag }}</span>
        </div>
        <mat-card-actions class="content__btn text-end">
          <button mat-button routerLink="{{ '/posts/detail/' +  post.id}}">Read more...</button>
        </mat-card-actions>
      </div>
    </mat-card-content>
  </mat-card>
</div>
